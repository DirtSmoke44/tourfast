{% extends 'main/layout.html' %}
{% load static %}

{% block title %}Корзина{% endblock %}

{% block links %}
<link rel="stylesheet" href="{% static 'main/css/cart.css' %}">
{% endblock %}

{% block body %}
{% if tours %}
<div class="cart-container">
    <h2>Ваша корзина</h2>


    {% for tour in tours %}
    <div class="cart-item">
        <img src="{{ tour.photo.url }}" alt="{{ tour.title }}" class="cart-item-img">
        <div class="cart-item-details">
            <p class="cart-item-title">{{ tour.title }}</p>
            <p class="cart-item-subtitle">{{ tour.country.name }}, {{ tour.hotel.name }}</p>
        </div>
        <div class="cart-item-quantity">
            <button class="quantity-btn">-</button>
            <span class="quantity-number">1</span>
            <button class="quantity-btn">+</button>
        </div>
        <p class="cart-item-price">{{ tour.price|floatformat:"-2" }} ₽</p>
    </div>

    <a href="{% url 'remove_from_cart' tour.id %}" class="remove-btn">Удалить</a>
    {% endfor %}

    <div class="coupon-section">
        <input type="text" placeholder="Ваш купон" class="coupon-input">
        <button class="apply-coupon-btn">Принять</button>
    </div>

    <form action="{% url 'tours_page' %}" method="get">
        <button type="submit" class="add-tour-btn">Добавить тур</button>
    </form>

    <div class="cart-summary">
        <p>Отель за сутки: <span class="summary-price">47.99 ₽</span></p>
        <p>Стоимость тура: <span class="summary-price">{{ total_price|floatformat:"-2" }} ₽</span></p>
        <p>Всего: <span class="summary-price total-price">{{ total_price|floatformat:"-2" }} ₽</span></p>
        <a href="{% url 'clear_cart' %}" class="clear-cart-btn">Очистить</a>
    </div>

    <a href="{% url 'orderaccept_page' %}" class="checkout-btn">Оплатить</a>
</div>
{% else %}
    <p>Корзина пуста</p>
{% endif %}

{% endblock %}
